function graficasCha(){var s=8,a=10,t=2,o=10,p=960-o-a,e=69-s-t,n=d3.time.format("%b %Y").parse,r=d3.time.scale().range([0,p]);d3.csv("elecciones-distrito-cha.csv",function(s){return s.cantidad=+s.cantidad,s.fecha=n(s.date),s},function(n,i){var l=d3.nest().key(function(s){return s.distrito}).entries(i);r.domain([d3.min(l,function(s){return s.values[0].date}),d3.max(l,function(s){return s.values[s.values.length-1].date})]);var c=d3.select(".graficas-cha").selectAll("svg").data(l).enter().append("svg").attr("width",p+o+a).attr("height",e+s+t).append("g").attr("transform","translate("+o+","+s+")").each(function(s){s.y=d3.scale.linear().domain([0,d3.max(s.values,function(s){return s.cantidad})]).range([e,0])});c.append("path").attr("class","area").attr("d",function(s){return d3.svg.area().x(function(s){return r(s.fecha)}).y1(function(a){return s.y(a.cantidad)}).y0(e)(s.values)}),c.append("path").attr("class","line").attr("d",function(s){return d3.svg.line().x(function(s){return r(s.fecha)}).y(function(a){return s.y(a.cantidad)})(s.values)}),c.append("text").attr("x",p-6).attr("y",e-6).style("text-anchor","end").text(function(s){return s.key})})}$(function(){d3.json("mapas/distritos-cha-zaragoza.geojson",function(s,a){!function(s){mapboxgl.accessToken="pk.eyJ1Ijoiam9yZ2VhdGd1IiwiYSI6IjNta3k1WDQifQ.JERO-KTpP2O6F0JwKRPCrg";var a=new mapboxgl.Map({container:"map",style:"mapbox://styles/jorgeatgu/cjf4fr0sj019m2qqiaz1mynna",center:[-.850431,41.651729],zoom:11.5});a.addControl(new mapboxgl.Navigation);var t=a.getCanvasContainer(),o=d3.select(t).append("svg"),p=(o.append("g").attr("class","distritos"),d3.geo.transform({point:function(s,t){var o=a.project(new mapboxgl.LngLat(s,t));this.stream.point(o.x,o.y)}})),e=d3.geo.path().projection(p),n=d3.select("#map").append("div").attr("class","tooltip tooltip-cha"),r=o.selectAll("path").data(s.features).enter().append("path").attr("class","distritosCHA").on("mouseover",function(s){n.style("display","block").html('<h4 class="tooltipTitulo">'+s.properties.distrito+'</h4><div class="container-tooltip-partido"><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2015</span><span style="width:'+1.65*s.properties.quince_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.quince_p+'%</span><span class="resultadoVotos">'+s.properties.quince_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2011</span><span style="width:'+1.65*s.properties.once_p+'%" class="bgc-cha"></span></span><span class="resultado"><span  class="resultadoVotos"> '+s.properties.once_p+'%</span><span class="resultadoVotos">'+s.properties.once_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2007</span><span style="width:'+1.65*s.properties.siete_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.siete_p+'%</span> <span class="resultadoVotos">'+s.properties.siete_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2003</span><span style="width:'+1.65*s.properties.tres_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.tres_p+'%</span> <span class="resultadoVotos">'+s.properties.tres_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1999</span><span style="width:'+1.65*s.properties.nueve_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.nueve_p+'%</span> <span class="resultadoVotos"> '+s.properties.nueve_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1995</span><span style="width:'+1.65*s.properties.cinco_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.cinco_p+'%</span> <span class="resultadoVotos"> '+s.properties.cinco_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1991</span><span style="width:'+1.65*s.properties.uno_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.uno_p+'%</span> <span class="resultadoVotos"> '+s.properties.uno_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1987</span><span style="width:'+1.65*s.properties.ochosiete_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.ochosiete_p+'%</span> <span class="resultadoVotos"> '+s.properties.ochosiete_v+" votos</span><p/></div>").transition().duration(200)}).transition().duration(200);a.scrollZoom.disable(),r.attr("d",e)}(a)})}),graficasCha();