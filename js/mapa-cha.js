function graficasCha(){var s=24,a=24,t=500-(a+24),o=350-(s+24),p=d3.scale.ordinal().rangeRoundBands([0,t],.2),e=d3.scale.linear().range([o,0]),n=d3.svg.axis().scale(p).orient("bottom"),r=d3.svg.axis().scale(e).orient("left");d3.csv("datos/elecciones-distrito-cha.csv",function(i,l){datos=l,datos.forEach(function(s){s.fecha=s.fecha,s.cantidad=+s.cantidad});var c=d3.nest().key(function(s){return s.distrito}).entries(l);p.domain(l.map(function(s){return s.fecha})),e.domain([0,d3.max(c,function(s){return s.values[0].cantidad})]);var u=d3.select(".graficas-cha").selectAll("svg").data(c).enter().append("svg").attr("class","distrito "+d.key).attr("width",t).attr("height",o).append("g").attr("transform","translate("+a+","+s+")");u.append("g").attr("class","xAxis").attr("transform","translate(0,"+o+")").call(n),u.append("g").attr("class","yAxis").call(r).append("text").attr("x",t+10).attr("y",o).text(function(s){return s.key}),u.selectAll(".bar").data(datos).enter().append("rect").attr("class","bar").attr("x",function(s){return p(s.fecha)}).attr("width",p.rangeBand()).attr("y",function(s){return e(s.cantidad)}).attr("height",function(s){return o-e(s.cantidad)}).attr("fill","#ca0020")})}$(function(){d3.json("mapas/distritos-cha-zaragoza.geojson",function(s,a){!function(s){mapboxgl.accessToken="pk.eyJ1Ijoiam9yZ2VhdGd1IiwiYSI6IjNta3k1WDQifQ.JERO-KTpP2O6F0JwKRPCrg";var a=new mapboxgl.Map({container:"map",style:"mapbox://styles/jorgeatgu/cjf4fr0sj019m2qqiaz1mynna",center:[-.850431,41.651729],zoom:11.5});a.addControl(new mapboxgl.Navigation);var t=a.getCanvasContainer(),o=d3.select(t).append("svg"),p=(o.append("g").attr("class","distritos"),d3.geo.transform({point:function(s,t){var o=a.project(new mapboxgl.LngLat(s,t));this.stream.point(o.x,o.y)}})),e=d3.geo.path().projection(p),n=d3.select("#map").append("div").attr("class","tooltip tooltip-cha"),r=o.selectAll("path").data(s.features).enter().append("path").attr("class","distritosCHA").on("mouseover",function(s){n.style("display","block").html('<h4 class="tooltipTitulo">'+s.properties.distrito+'</h4><div class="container-tooltip-partido"><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2015</span><span style="width:'+1.65*s.properties.quince_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.quince_p+'%</span><span class="resultadoVotos">'+s.properties.quince_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2011</span><span style="width:'+1.65*s.properties.once_p+'%" class="bgc-cha"></span></span><span class="resultado"><span  class="resultadoVotos"> '+s.properties.once_p+'%</span><span class="resultadoVotos">'+s.properties.once_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2007</span><span style="width:'+1.65*s.properties.siete_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.siete_p+'%</span> <span class="resultadoVotos">'+s.properties.siete_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2003</span><span style="width:'+1.65*s.properties.tres_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.tres_p+'%</span> <span class="resultadoVotos">'+s.properties.tres_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1999</span><span style="width:'+1.65*s.properties.nueve_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.nueve_p+'%</span> <span class="resultadoVotos"> '+s.properties.nueve_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1995</span><span style="width:'+1.65*s.properties.cinco_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.cinco_p+'%</span> <span class="resultadoVotos"> '+s.properties.cinco_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1991</span><span style="width:'+1.65*s.properties.uno_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.uno_p+'%</span> <span class="resultadoVotos"> '+s.properties.uno_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1987</span><span style="width:'+1.65*s.properties.ochosiete_p+'%" class="bgc-cha"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.ochosiete_p+'%</span> <span class="resultadoVotos"> '+s.properties.ochosiete_v+" votos</span><p/></div>").transition().duration(200)}).transition().duration(200);a.scrollZoom.disable(),r.attr("d",e)}(a)})}),graficasCha();