var width=0<window.innerWidth?window.innerWidth:screen.width;function graficasPSOE(){var e=48,p=48,n=48,r=48,i=450-r-p,l=390-e-n,c=d3.scale.ordinal().rangeRoundBands([0,i],.2),d=d3.scale.linear().range([l,0]),u=d3.svg.axis().scale(c).tickFormat(d3.format("d")).orient("bottom"),v=d3.svg.axis().scale(d).ticks(5).tickFormat(function(s){return s+"%"}).tickSize(-i).orient("left");d3.csv("datos/elecciones/elecciones-distrito-psoe.csv",function(s,a){datos=a,datos.forEach(function(s){s.fecha=s.fecha,s.cantidad=+s.cantidad});var t=d3.nest().key(function(s){return s.distrito}).entries(a);c.domain(a.map(function(s){return s.fecha})),d.domain([0,60]);var o=d3.select(".graficas-psoe").selectAll("svg").data(t).enter().append("svg").attr("class","distrito").attr("width",i+r+p).attr("height",l+e+n).append("g").attr("transform","translate("+r+","+e+")");o.selectAll(".bar").data(function(s){return s.values}).enter().append("rect").attr("class","bar").attr("x",function(s){return c(s.fecha)}).attr("width",c.rangeBand()).attr("y",function(s){return d(s.cantidad)}).attr("height",function(s){return l-d(s.cantidad)}).attr("fill","#52788b"),o.selectAll("text").data(function(s){return s.values}).enter().append("text").attr("class","tooltip-porcentaje").text(function(s){return s.cantidad}).attr("x",function(s){return c(s.fecha)}).attr("y",function(s){return d(s.cantidad)-5}),o.append("g").attr("class","xAxis").attr("transform","translate(0,"+l+")").call(u),o.append("g").attr("class","yAxis").call(v).append("text").attr("class","nombre-distrito").attr("y","-3%").attr("x","8px").text(function(s){return s.key})})}767<width&&$(function(){d3.json("mapas/distritos-psoe-zaragoza.geojson",function(s,a){!function(s){mapboxgl.accessToken="pk.eyJ1Ijoiam9yZ2VhdGd1IiwiYSI6IjNta3k1WDQifQ.JERO-KTpP2O6F0JwKRPCrg";var o=new mapboxgl.Map({container:"map",style:"mapbox://styles/jorgeatgu/cjf1lzmig08ry2sqqyvml8ycl",center:[-.850431,41.651729],zoom:11.5});o.addControl(new mapboxgl.Navigation);var a=o.getCanvasContainer(),t=d3.select(a).append("svg"),e=(t.append("g").attr("class","distritos"),d3.geo.transform({point:function(s,a){var t=o.project(new mapboxgl.LngLat(s,a));this.stream.point(t.x,t.y)}})),p=d3.geo.path().projection(e),n=d3.select("#map").append("div").attr("class","tooltip tooltip-psoe"),r=t.selectAll("path").data(s.features).enter().append("path").attr("class","distritosPSOE").on("mouseover",function(s){n.style("display","block").html('<h4 class="tooltipTitulo">'+s.properties.distrito+'</h4><div class="container-tooltip-partido"><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2015</span><span style="width:'+1.65*s.properties.quince_p+'%" class="bgc-psoe"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.quince_p+'%</span><span class="resultadoVotos">'+s.properties.quince_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2011</span><span style="width:'+1.65*s.properties.once_p+'%" class="bgc-psoe"></span></span><span class="resultado"><span  class="resultadoVotos"> '+s.properties.once_p+'%</span><span class="resultadoVotos">'+s.properties.once_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2007</span><span style="width:'+1.65*s.properties.siete_p+'%" class="bgc-psoe"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.siete_p+'%</span> <span class="resultadoVotos">'+s.properties.siete_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">2003</span><span style="width:'+1.65*s.properties.tres_p+'%" class="bgc-psoe"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.tres_p+'%</span> <span class="resultadoVotos">'+s.properties.tres_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1999</span><span style="width:'+1.65*s.properties.nueve_p+'%" class="bgc-psoe"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.nueve_p+'%</span> <span class="resultadoVotos"> '+s.properties.nueve_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1995</span><span style="width:'+1.65*s.properties.cinco_p+'%" class="bgc-psoe"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.cinco_p+'%</span> <span class="resultadoVotos"> '+s.properties.cinco_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1991</span><span style="width:'+1.65*s.properties.uno_p+'%" class="bgc-psoe"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.uno_p+'%</span> <span class="resultadoVotos"> '+s.properties.uno_v+' votos</span><p/><p class="tooltipPartido"><span class="resultado-izda"><span class="titulo-partido">1987</span><span style="width:'+1.65*s.properties.ochosiete_p+'%" class="bgc-psoe"></span></span><span class="resultado"><span class="resultadoVotos"> '+s.properties.ochosiete_p+'%</span> <span class="resultadoVotos"> '+s.properties.ochosiete_v+" votos</span><p/></div>").transition().duration(200)}).transition().duration(200);o.scrollZoom.disable(),r.attr("d",p)}(a)})}),graficasPSOE();