var width=window.innerWidth>0?window.innerWidth:screen.width,csvElements=["datos/unanimidad.csv","datos/tripartitos.csv","datos/presentada.csv","datos/abstencion.csv","datos/en-contra.csv","datos/a-favor.csv","datos/soledad.csv"];function estadisticasChart(t){const e={top:24,right:24,bottom:24,left:24};let n=0,a=0,s=0,i=0;const r=d3.select(".chart-estadisticas"),c=r.select("svg"),o={};let l;function d(t){s=r.node().offsetWidth,i=400,n=s-e.left-e.right,a=i-e.top-e.bottom,c.attr("width",s).attr("height",i);const l="translate("+e.left+","+e.top+")",d=c.select(".chart-estadisticas-container");d.attr("transform",l),function(t,e){o.count.x.range([0,t]).padding(.8),o.count.y.range([e,0])}(n,a);const h=r.select(".area-container-chart-vertical").selectAll(".bar-vertical").data(t),p=h.enter().append("rect").attr("class","bar-vertical");h.merge(p).attr("width",o.count.x.bandwidth()).attr("x",t=>o.count.x(t.nombre)).attr("y",t=>o.count.y(0)).attr("height",0).transition().ease(d3.easeSin).duration(1200).attr("y",t=>o.count.y(t.valor)).attr("height",t=>a-o.count.y(t.valor)),function(t){const e=d3.axisBottom(o.count.x);t.select(".axis-x").attr("transform","translate(0,"+a+")").call(e);const n=d3.axisLeft(o.count.y).tickFormat(d3.format("d")).ticks(5).tickSizeInner(-s);t.select(".axis-y").transition().duration(1e3).call(n)}(d)}window.addEventListener("resize",function(){d(l)}),d3.csv(t,function(t,e){t?console.log(t):((l=e).forEach(t=>{t.valor=+t.valor}),function(){const t=c.select(".chart-estadisticas-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","area-container-chart-vertical")}(),function(){const t=d3.scaleBand().domain(l.map(function(t){return t.nombre})),e=d3.scaleLinear().domain([0,d3.max(l,t=>t.valor)+d3.max(l,t=>t.valor)/4]);o.count={x:t,y:e}}(),d(l))})}var container=document.getElementById("scroll"),step=document.querySelector(".step"),graphic=document.querySelector(".scroll__graphic"),text=document.querySelector(".scroll__text"),scroller=scrollama();function handleResize(){var t=Math.floor(.75*window.innerHeight);step.style.height=t+"px";var e=step.getBoundingClientRect(),n=container.getBoundingClientRect().width,a=(e.width,n.width,n-64),s=Math.floor(window.innerHeight/2);Math.floor(s/2);graphic.style.width=a,graphic.style.height=s,scroller.resize()}function handleStepEnter(t){0===t.index?(d3.selectAll("rect").remove(),estadisticasChart(csvElements[0])):1===t.index?(d3.selectAll("rect").remove(),estadisticasChart(csvElements[1])):2===t.index?estadisticasChart(csvElements[2]):3===t.index?estadisticasChart(csvElements[3]):4===t.index?estadisticasChart(csvElements[4]):5===t.index?estadisticasChart(csvElements[5]):6===t.index&&estadisticasChart(csvElements[6])}function init(){handleResize(),scroller.setup({container:"#scroll",graphic:".scroll__graphic",text:".scroll__text",step:".scroll__text .step",offset:.63}).onStepEnter(handleStepEnter),window.addEventListener("resize",handleResize)}function initResponsive(){scroller.setup({step:".step"}).onStepEnter(handleStepEnter).onStepExit(handleStepExit)}width>769?init():initResponsive();