/*!
 * chartjs-plugin-datalabels
 * http://chartjs.org/
 * Version: 0.1.0
 *
 * Copyright 2017 Chart.js Contributors
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-plugin-datalabels/blob/master/LICENSE.md
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],e):e(t.Chart)}(this,function(t){"use strict";function e(t,e){var n=e.x,r=e.y;if(null===n)return{x:0,y:-1};if(null===r)return{x:1,y:0};var a=t.x-n,i=t.y-r,l=Math.sqrt(a*a+i*i);return{x:l?a/l:0,y:l?i/l:-1}}function n(t){var e,n=[];for(t=[].concat(t);t.length;)e=t.pop(),"string"==typeof e?n.unshift.apply(n,e.split("\n")):Array.isArray(e)?t.push.apply(t,e):v.isNullOrUndef(t)||n.unshift(""+e);return n}function r(t){return!t||v.isNullOrUndef(t.size)||v.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function a(t,e,n){var r,a=[].concat(e),i=a.length,l=t.font,o=0;for(t.font=n.string,r=0;r<i;++r)o=Math.max(t.measureText(a[r]).width,o);return t.font=l,{height:i*n.lineHeight,width:o}}function i(e){var n=t.defaults.global,a=v.valueOrDefault(e.size,n.defaultFontSize),i={family:v.valueOrDefault(e.family,n.defaultFontFamily),lineHeight:v.options.toLineHeight(e.lineHeight,a),size:a,style:v.valueOrDefault(e.style,n.defaultFontStyle),weight:v.valueOrDefault(e.weight,null),string:""};return i.string=r(i),i}function l(t,e){var n=e.positioner(t._view,e.anchor,e.origin);if("center"===e.align)return{x:n.x,y:n.y};var r=e.padding,a=e.rotation,i=e.size.height,l=e.size.width,o=n.vx,s=n.vy,d=0,u=0;return"start"===e.align&&(o=-o,s=-s),d+=Math.abs(l/2*Math.cos(a))+Math.abs(i/2*Math.sin(a)),u+=Math.abs(l/2*Math.sin(a))+Math.abs(i/2*Math.cos(a)),d+=o>0?r.right:r.left,u+=s>0?r.bottom:r.top,d+=e.borderWidth||0,u+=e.borderWidth||0,d+=e.offset,u+=e.offset,{x:n.x+d*o,y:n.y+u*s}}function o(t,e){var n=t.height,r=t.width,a=-r/2,i=-n/2;return{frame:{x:a-e.left,y:i-e.top,w:r+e.width,h:n+e.height},text:{x:a,y:i,w:r,h:n}}}function s(t,e,n){var r=n.backgroundColor,a=n.borderColor,i=n.borderWidth;(r||a&&i)&&(t.beginPath(),v.canvas.roundedRect(t,Math.round(e.x)-i/2,Math.round(e.y)-i/2,Math.round(e.w)+i,Math.round(e.h)+i,n.borderRadius),t.closePath(),r&&(t.fillStyle=r,t.fill()),a&&i&&(t.strokeStyle=a,t.lineWidth=i,t.lineJoin="miter",t.stroke()))}function d(t,e,n,r){var a,i,l,o=r.textAlign,s=r.font,d=s.lineHeight,u=r.color,f=e.length;if(f&&u)for(a=n.x,i=n.y+d/2,"center"===o?a+=n.w/2:"end"!==o&&"right"!==o||(a+=n.w),t.font=r.font.string,t.fillStyle=u,t.textAlign=o,t.textBaseline="middle",l=0;l<f;++l)t.fillText(e[l],Math.round(a),Math.round(i),Math.round(n.w)),i+=d}function u(e){return e instanceof t.elements.Arc?x.arc:e instanceof t.elements.Point?x.point:e instanceof t.elements.Rectangle?x.rect:x.fallback}function f(t){var e=t._model.horizontal,n=t._scale||e&&t._xScale||t._yScale;if(!n)return null;if(void 0!==n.xCenter&&void 0!==n.yCenter)return{x:n.xCenter,y:n.yCenter};var r=n.getBasePixel();return e?{x:r,y:null}:{x:null,y:r}}function h(e,r,l,o,s){var d=t.helpers.options.resolve;if(!d([o.display,!0],s,r))return null;var h=s.dataset.data[r],c=v.valueOrDefault(v.callback(o.formatter,[h,s]),h),y=v.isNullOrUndef(c)?[]:n(c);if(!y.length)return null;var g=i(d([o.font,{}],s,r)),x={align:d([o.align,"center"],s,r),anchor:d([o.anchor,"center"],s,r),backgroundColor:d([o.backgroundColor,null],s,r),borderColor:d([o.borderColor,null],s,r),borderRadius:d([o.borderRadius,0],s,r),borderWidth:d([o.borderWidth,0],s,r),color:d([o.color,t.defaults.global.defaultFontColor],s,r),font:g,lines:y,offset:d([o.offset,0],s,r),padding:v.options.toPadding(d([o.padding,0],s,r)),rotation:d([o.rotation,0],s,r)*(Math.PI/180),textAlign:d([o.textAlign,"start"],s,r),origin:f(e),positioner:u(e),size:a(l,y,g)};return x}function c(t,e){var n=t.datalabels,r={};return n===!1?null:(n===!0&&(n={}),v.merge(r,[e,n]))}t=t&&t.hasOwnProperty("default")?t["default"]:t;var y=t.helpers,g={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,color:void 0,display:!0,font:{family:void 0,size:void 0,style:void 0,weight:null},lineHeight:1.2,offset:4,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",formatter:function(t){var e,n,r,a=t;if(y.isObject(t))if(y.isNullOrUndef(t.label))if(y.isNullOrUndef(t.r))for(a="",e=Object.keys(t),r=0,n=e.length;r<n;++r)a+=(0!==r?", ":"")+e[r]+": "+t[e[r]];else a=t.r;else a=t.label;return""+a}},x={arc:function(t,e){var n,r=(t.startAngle+t.endAngle)/2,a=Math.cos(r),i=Math.sin(r),l=t.innerRadius,o=t.outerRadius;return n="start"===e?l:"end"===e?o:(l+o)/2,{x:t.x+a*n,y:t.y+i*n,vx:a,vy:i}},point:function(t,n,r){var a=e(t,r),i=t.radius,l=0;return"start"===n?l=-i:"end"===n&&(l=i),{x:t.x+a.x*l,y:t.y+a.y*l,vx:a.x,vy:a.y}},rect:function(t,n,r){var a=t.horizontal,i=Math.abs(t.base-(a?t.x:t.y)),l=a?Math.min(t.x,t.base):t.x,o=a?t.y:Math.min(t.y,t.base),s=e(t,r);return"center"===n?a?l+=i/2:o+=i/2:"start"!==n||a?"end"===n&&a&&(l+=i):o+=i,{x:l,y:o,vx:s.x,vy:s.y}},fallback:function(t,n,r){var a=e(t,r);return{x:t.x,y:t.y,vx:a.x,vy:a.y}}};t.defaults.global.plugins.datalabels=g;var v=t.helpers,b="$datalabels";t.plugins.register({id:"datalabels",afterDatasetUpdate:function(t,e,n){var r,a,i=t.data.datasets[e.index],l=c(i,n),o=l&&l.display,s=e.meta.data||[],d=s.length,u=t.ctx;for(u.save(),r=0;r<d;++r)a=s[r],a[b]=o&&a&&!a.hidden?h(a,r,u,l,{chart:t,dataIndex:r,dataset:i,datasetIndex:e.index}):null;u.restore()},afterDatasetDraw:function(t,e){var n,r,a,i,u,f=e.meta.data||[],h=f.length,c=t.ctx;for(n=0;n<h;++n)r=f[n],a=r[b],a&&(i=l(r,a),u=o(a.size,a.padding),c.save(),c.translate(Math.round(i.x),Math.round(i.y)),c.rotate(a.rotation),s(c,u.frame,a),d(c,a.lines,u.text,a),c.restore())}})});